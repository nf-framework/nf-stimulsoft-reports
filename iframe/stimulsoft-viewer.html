<!DOCTYPE html>
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <base href="/">

    <!-- Report designer Office2013 White Blue style -->
    <link href="stimulsoft-reports-js/Css/stimulsoft.designer.office2013.whiteblue.css" rel="stylesheet">
    <link href="stimulsoft-reports-js/Css/stimulsoft.viewer.office2013.whiteblue.css" rel="stylesheet">

    <!-- Stimusloft Reports.JS -->
    <script src="stimulsoft-reports-js/Scripts/stimulsoft.reports.js" type="text/javascript"></script>
    <script src="stimulsoft-reports-js/Scripts/stimulsoft.viewer.js" type="text/javascript"></script>

    <!-- Report designer scripts, may be external -->
    <script type="text/javascript">
		StiOptions.WebServer.url = '@stimulsoft/adapter';
        Stimulsoft.Base.Localization.StiLocalization.setLocalizationFile("static/localizations/ru.xml", true);
		
        let options = new Stimulsoft.Viewer.StiViewerOptions();
        options.appearance.fullScreenMode = true;
        options.appearance.scrollbarsMode = true;
        options.toolbar.viewMode = Stimulsoft.Viewer.StiWebViewMode.Continuous;

		this.viewer = new Stimulsoft.Viewer.StiViewer(options);
        this.setReport = function(reportJson) {
			const report = new Stimulsoft.Report.StiReport();
			report.load(reportJson);
			this.viewer.report = report;
		}

		this.setLicense = (key) => {
            Stimulsoft.Base.StiLicense.key = key;
		}
        this.setVariables = variables =>
        {
            let report = this.viewer.report;
            if (variables && report.dictionary.variables.list.length > 0) {
                Object.entries(variables)
                    .forEach(([name,value]) => {
                        const variable = report.dictionary.variables.getByName(name);
                        if(variable) {
                            variable.setValue(value);
                        }
                    });
            }
        }
	</script>
</head>
<body>
</body>
</html>